[gd_resource type="Resource" load_steps=3 format=3 uid="uid://ysod80vse2la"]

[ext_resource type="Texture2D" uid="uid://dgeu6t11scpeq" path="res://assets/sprites/chomposaurus.png" id="1_tuca1"]

[sub_resource type="GDScript" id="GDScript_70oyx"]
script/source = "extends CardData

func apply_effects(targets: Array[Node], modifiers: ModifierHandler) -> void:
	if not Events.enemy_died.is_connected(_on_enemy_died):
		Events.enemy_died.connect(_on_enemy_died, CONNECT_ONE_SHOT)

	var modified_damage := modifiers.get_modified_value(10, Modifier.Type.DMG_DEALT)
	Apply.damage(targets, modified_damage)

	Apply.fatality_candidates = [targets[0], self]

func _on_enemy_died(enemy: Enemy) -> void:
	if Apply.fatality_candidates.has(enemy) and Apply.fatality_candidates.has(self):
		Apply.mana(hero, 1)
"

[resource]
script = SubResource("GDScript_70oyx")
name = "Test Fatal"
rarity = 2
art = ExtResource("1_tuca1")
description = "Deal 10 damage.
If fatal, gain 1 mana."
